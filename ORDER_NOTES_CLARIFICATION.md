# 📝 주문 메모/요청사항 용어 정리

**작성일**: 2025년 10월 15일  
**목적**: 고객 요청사항과 판매자 메모를 명확히 구분

---

## 🎯 용어 구분

### 1️⃣ **배송 요청사항** (Customer Request)

**정의**: 주문 시 고객이 남기는 배송 관련 요청사항

**예시**:
- "문앞에 놓아주세요"
- "경비실에 맡겨주세요"
- "배송 전 연락주세요"
- "부재 시 문 앞에 두고 가주세요"

**표시 위치**:
- 주문 상세 다이얼로그의 "배송 요청사항" 섹션
- 주문 테이블의 notes 컬럼

**시각적 특징**:
- 🟠 주황색 강조 (warning color)
- "고객 요청" 칩 표시
- 주황색 테두리

**데이터 필드**: `Order.notes`

---

### 2️⃣ **판매자 메모** (Seller Memo)

**정의**: 운송장 입력 시 판매자가 작성하거나 자동 생성되는 배송 메모

**예시**:
- "김민수님 주문 - 안전하게 배송하겠습니다"
- "이지은님 주문 - 안전하게 배송하겠습니다"
- "취약 상품 - 조심히 다뤄주세요"

**표시 위치**:
- 운송장 입력 페이지의 "판매자 메모" 필드

**시각적 특징**:
- 일반 텍스트 필드
- 자동 생성 가능
- 도움말: "고객 요청사항은 주문 상세에서 확인하세요"

**데이터 필드**: ⚠️ **현재는 저장되지 않음** (TODO: 백엔드 필드 추가 필요)

---

## 📊 비교표

| 구분 | 배송 요청사항 | 판매자 메모 |
|------|-------------|------------|
| **작성자** | 고객 | 판매자/시스템 |
| **작성 시점** | 주문 시 | 운송장 입력 시 |
| **목적** | 배송 요청 전달 | 배송 지시사항 |
| **색상** | 🟠 주황색 | 일반 |
| **자동 생성** | ❌ 불가 | ✅ 가능 |
| **수정 가능** | ❌ 불가 | ✅ 가능 |
| **DB 필드** | `Order.notes` | ⚠️ 미구현 |

---

## 🎨 UI 디자인

### 주문 상세 - 배송 요청사항

```
┌─────────────────────────────────────────┐
│ 🚚 배송 요청사항        [고객 요청]     │
│ ┌─────────────────────────────────────┐ │
│ │ 📝 문앞에 놓아주세요                │ │
│ └─────────────────────────────────────┘ │
│ 🟠 주황색 테두리                        │
└─────────────────────────────────────────┘
```

**특징**:
- 주황색 배경 (warning.lighter)
- 주황색 테두리 (2px solid)
- "고객 요청" 칩
- 폰트 굵게 (fontWeight: 500)

---

### 운송장 입력 - 판매자 메모

```
┌─────────────────────────────────────────┐
│ 판매자 메모                             │
│ [김민수님 주문 -                        │
│  안전하게 배송하겠습니다.               │
│                                         ]│
│ ℹ️ 고객 요청사항은 주문 상세에서 확인   │
└─────────────────────────────────────────┘
```

**특징**:
- 일반 텍스트 필드
- 단일 주문: 수정 가능
- 여러 주문: 자동 생성 (비활성화)

---

## 🔄 데이터 흐름

### 현재 구현 (임시)

```
주문 생성
  ↓
Order.notes = 고객이 입력한 배송 요청사항
  ↓
주문 상세에서 "배송 요청사항"으로 표시
  ↓
운송장 입력 시
  ↓
shippingInfo.notes = 판매자 메모 (자동 생성)
  ↓
⚠️ 실제로는 저장되지 않음 (콘솔 로그만)
```

---

### 향후 구현 (권장)

```
주문 생성
  ↓
Order.notes = 고객의 배송 요청사항
Order.shippingNotes = null (초기값)
  ↓
주문 상세에서
  - "배송 요청사항": Order.notes
  - "판매자 메모": Order.shippingNotes
  ↓
운송장 입력 시
  ↓
Order.shippingNotes = 판매자 메모 (자동 생성)
  ↓
✅ 데이터베이스에 저장
```

---

## 🚀 백엔드 개선 필요사항

### Order 엔티티에 필드 추가

```java
@Entity
@Table(name = "orders")
public class Order {
    // ... 기존 필드들
    
    @Column(name = "notes", columnDefinition = "TEXT")
    private String notes;  // 고객의 배송 요청사항
    
    @Column(name = "shipping_notes", columnDefinition = "TEXT")
    private String shippingNotes;  // 판매자 메모
    
    @Column(name = "tracking_number")
    private String trackingNumber;  // 운송장 번호
    
    @Column(name = "carrier")
    private String carrier;  // 택배사
    
    @Column(name = "shipping_date")
    private LocalDate shippingDate;  // 배송일
    
    @Column(name = "estimated_delivery")
    private LocalDate estimatedDelivery;  // 예상 배송일
}
```

### OrderDto에 필드 추가

```java
public class OrderDto {
    // ... 기존 필드들
    
    private String notes;  // 고객 요청사항
    private String shippingNotes;  // 판매자 메모
    private String trackingNumber;
    private String carrier;
    private LocalDate shippingDate;
    private LocalDate estimatedDelivery;
}
```

### API 업데이트

```java
// OrderController.java
@PutMapping("/{id}/shipping")
public ResponseEntity<OrderDto> updateShippingInfo(
    @PathVariable Long id,
    @RequestBody ShippingInfoRequest request
) {
    // 운송장 정보 업데이트
    Order order = orderService.updateShippingInfo(id, request);
    return ResponseEntity.ok(orderMapper.toDto(order));
}
```

---

## 📋 사용 예시

### 케이스 1: 고객 요청사항이 있는 주문

**주문 생성 시**:
```json
{
  "customerName": "김민수",
  "notes": "문앞에 놓아주세요",  // 고객 요청사항
  ...
}
```

**주문 상세 보기**:
```
배송 요청사항 [고객 요청]
┌────────────────────────┐
│ 📝 문앞에 놓아주세요    │
└────────────────────────┘
```

**운송장 입력 시**:
```
판매자 메모
[김민수님 주문 - 안전하게 배송하겠습니다]
ℹ️ 고객 요청사항: "문앞에 놓아주세요"
```

---

### 케이스 2: 고객 요청사항이 없는 주문

**주문 생성 시**:
```json
{
  "customerName": "이지은",
  "notes": null,  // 요청사항 없음
  ...
}
```

**주문 상세 보기**:
```
배송 요청사항 [고객 요청]
┌────────────────────────────────────┐
│          📝                         │
│   고객 요청사항이 없습니다          │
│ 주문 시 고객이 남긴 배송 요청사항이 │
│    여기에 표시됩니다                │
└────────────────────────────────────┘
```

**운송장 입력 시**:
```
판매자 메모
[이지은님 주문 - 안전하게 배송하겠습니다]
ℹ️ 고객 요청사항 없음
```

---

## 🎯 사용자 관점에서

### 판매자 (운송장 입력 시)

1. **주문 상세를 먼저 확인**
   - 고객이 남긴 "배송 요청사항" 확인
   - 예: "문앞에 놓아주세요"

2. **운송장 입력 페이지에서**
   - "판매자 메모" 작성 (또는 자동 생성)
   - 고객 요청사항을 고려하여 배송 지시

3. **배송 시작**
   - 택배사에게 전달할 메모 작성 완료

### 고객 (주문 시)

1. **주문 생성 시**
   - "배송 요청사항" 입력
   - 예: "경비실에 맡겨주세요"

2. **주문 확인**
   - 내가 입력한 요청사항이 주문 상세에 표시됨
   - 판매자가 확인했는지 알 수 있음

---

## 💡 개선 효과

### 1. 명확한 구분
- ✅ 고객 vs 판매자 메모 구분
- ✅ 용어 혼란 방지
- ✅ 정보 추적 가능

### 2. 업무 효율성
- ✅ 고객 요청사항 빠르게 파악
- ✅ 배송 지시사항 자동 생성
- ✅ 실수 방지

### 3. 고객 만족도
- ✅ 요청사항 반영 확인
- ✅ 투명한 정보 제공
- ✅ 신뢰도 향상

---

## 🧪 테스트 시나리오

### ✅ 시나리오 1: 요청사항이 있는 주문

**단계**:
1. 주문 목록에서 "문앞에 놓아주세요" 메모가 있는 주문 찾기
2. 상세보기 클릭
3. "배송 요청사항" 섹션 확인

**예상 결과**:
- 🟠 주황색 박스로 강조
- "고객 요청" 칩 표시
- 고객이 입력한 내용 그대로 표시

### ✅ 시나리오 2: 요청사항이 없는 주문

**단계**:
1. 메모가 없는 주문 찾기
2. 상세보기 클릭
3. "배송 요청사항" 섹션 확인

**예상 결과**:
- 회색 박스
- "고객 요청사항이 없습니다" 메시지
- 안내 문구 표시

### ✅ 시나리오 3: 운송장 입력 시 구분

**단계**:
1. 운송장 입력 페이지로 이동
2. 요청사항이 있는 주문 선택
3. "판매자 메모" 필드 확인

**예상 결과**:
- 자동으로 판매자 메모 생성
- 도움말: "고객 요청사항은 주문 상세에서 확인하세요"

---

## 📝 요약

| 항목 | 현재 상태 | 향후 개선 |
|------|----------|----------|
| **용어** | ✅ 명확히 구분 | - |
| **UI** | ✅ 색상/칩으로 구분 | - |
| **백엔드** | ⚠️ 단일 필드 사용 | 📌 별도 필드 필요 |
| **저장** | ⚠️ 판매자 메모 미저장 | 📌 DB 저장 구현 |
| **API** | ⚠️ 기본 상태 변경만 | 📌 운송장 정보 API |

---

**문서 버전**: 1.0  
**마지막 업데이트**: 2025년 10월 15일  
**다음 단계**: 백엔드 Order 엔티티에 `shippingNotes` 필드 추가

